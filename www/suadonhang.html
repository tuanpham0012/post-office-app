<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover, shrink-to-fit=no">
    <meta name="description" content="Suha - Multipurpose Ecommerce Mobile HTML Template">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#100DD1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- The above tags *must* come first in the head, any other head content must come *after* these tags-->
    <!-- Title-->
    <title>Suha - Multipurpose Ecommerce Mobile HTML Template</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap">
    <!-- Favicon-->
    <link rel="icon" href="assets/img/icons/icon-72x72.png">
    <!-- Apple Touch Icon-->
    <link rel="apple-touch-icon" href="assets/img/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/img/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="assets/img/icons/icon-167x167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/icons/icon-180x180.png">
    <!-- CSS Libraries-->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/default/lineicons.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- Stylesheet-->
    <link rel="stylesheet" href="style.css">
    <!-- Web App Manifest-->
    <link rel="manifest" href="manifest.json">
  </head>
  <body>
    <!-- Preloader-->
    <div class="preloader" id="preloader">
      <div class="spinner-grow text-secondary" role="status">
        <div class="sr-only">Loading...</div>
      </div>
    </div>
    <!-- Header Area-->
    <div class="header-area" id="headerArea">
      <div class="container h-100 d-flex align-items-center justify-content-between">
        <!-- Back Button-->
        <div class="back-button"><a href="./home.html">
            <svg class="bi bi-arrow-left" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path>
            </svg></a></div>
        <!-- Page Title-->
        <div class="page-heading">
          <h6 class="mb-0">Đơn hàng: <span id="maDh"></span></h6>
        </div>
        <!-- Navbar Toggler-->
        <div class="suha-navbar-toggler d-flex justify-content-between flex-wrap" id="suhaNavbarToggler"><span></span><span></span><span></span></div>
      </div>
    </div>
    <!-- Sidenav Black Overlay-->
    <div class="sidenav-black-overlay"></div>
    <!-- Side Nav Wrapper-->
    <div class="suha-sidenav-wrapper" id="sidenavWrapper">
      <!-- Sidenav Profile-->
      <div class="sidenav-profile">
        <div class="user-profile"><img src="img/user.jpg" alt=""></div>
        <div class="user-info">
          <h6 class="user-name mb-0">Phạm QT</h6>
        </div>
      </div>
      <!-- Sidenav Nav-->
      <ul class="sidenav-nav ps-0">
        <li><a href="#"><i class="lni lni-user"></i>Thông tin tài khoản</a></li>
        <li><a href="#"><i class="lni lni-alarm lni-tada-effect"></i>Nâng cấp VIP</li>
        <li><a href="#"><i class="lni lni-empty-file"></i>Hỗ trợ</a></li>
        <li><a href="#"><i class="lni lni-heart"></i></i>Báo cáo</a></li>
        <li><a href="index.html"><i class="lni lni-power-switch"></i>Đăng xuất</a></li>
      </ul>
      <!-- Go Back Button-->
      <div class="go-home-btn" id="goHomeBtn"><i class="lni lni-arrow-left"></i></div>
    </div>
    <div class="page-content-wrapper">
      <div class="container">
        <!-- Profile Wrapper-->
        <br>
        <h6>Người gửi - Người nhận</h6>
        <div class="profile-wrapper-area py-3">
          <!-- User Meta Data-->
          <div class="card user-data-card">
            <div class="card-body">
              <span class="sender">Người gửi</span><br/><br/>
              <div class="mb-3">
                  
                  <input class="form-control" type="text" id="nguoi_gui" value="Phạm Quốc Tuấn" placeholder="Tên người gửi">
                  <br/><input class="form-control" type="text" id="sdt_nguoi_gui" value="0983776901" placeholder="Số điện thoại">
              </div>
              <span class="sender">Người nhận</span><br/><br/>
              <form action="" method="">
                <div class="mb-3">
                  <div class="title mb-2"><i class="lni lni-phone"></i><span>Điện thoại</span></div>
                  <input class="form-control" type="text" id="sdt_nguoi_nhan" placeholder="Nhập số điện thoại">
                </div>
                <div class="mb-3">
                  <div class="title mb-2"><i class="lni lni-user"></i><span>Họ tên</span></div>
                  <input class="form-control" type="text" id="nguoi_nhan" placeholder="Tên người nhận">
                </div>
                <div class="mb-3">
                  <div class="title mb-2"><i class="lni lni-map-marker"></i><span>Địa chỉ</span></div>
                  <input class="form-control" type="text" id="dia_chi" placeholder="Địa chỉ người nhận">
                </div>
              </form>
            </div>
          </div>
          <br/>
          <h6>Thông tin hàng hóa</h6>
          <br/>
          <div class="card user-data-card" id="product">
              <div class="card-body">
                <span class="sender">Hàng hóa 1</span><br/><br/>
                <form action="" method="">
                  <div class="mb-3">
                    <div class="title mb-2">*<span>Mô tả</span></div>
                    <input class="form-control" id="mo_ta" type="text" value="">
                  </div>
                  <div class="mb-3">
                    <div class="title mb-2">*</i><span>Giá trị hàng hóa</span></div>
                    <input class="form-control" id="gia_tri" type="number" value="0">
                  </div>
                  <div class="mb-3">
                    <div class="title mb-2">*<span>Trọng lượng (g)</span></div>
                    <input class="form-control" id="trong_luong" type="number" value="0">
                  </div>
                  <div class="mb-3">
                      <div class="title mb-2">*<span>Số lượng</span></div>
                      <input class="form-control" id="so_luong" type="number" min="1" value="1">
                    </div>
                </form>
              </div>
            </div>
            <p id="add-product" style="margin-top: 0.5rem;color: red; text-align: right;font-weight: 400;font-size: 1rem;">Thêm hàng hóa</p>
            <br/>
            <h6>Dịch vụ</h6>
        <div class="profile-wrapper-area py-3">
          <!-- User Meta Data-->
          <div class="card user-data-card">
            <div class="card-body">
              <form name = 'form-pro' action="" method="">
                <div class="mb-3">
                  <div class="title mb-2">Mã khuyến mại</span></div>
                  <input class="form-control" id="ma_khuyen_mai" type="text" value="">
                </div>
                <div class="mb-3">
                  <div class="title mb-2">Mã đơn hàng</span></div>
                  <input class="form-control" type="text" value="">
                </div>
                <br/>
                <button class="btn btn-success w-100" type="button" id="update">Cập nhật đơn hàng</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Internet Connection Status-->
    <div class="internet-connection-status" id="internetStatus"></div>
  
    <!-- All JavaScript Files-->
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/jquery.easing.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/jquery.countdown.min.js"></script>
    <script src="assets/js/default/jquery.passwordstrength.js"></script>
    <script src="assets/js/default/dark-mode-switch.js"></script>
    <script src="assets/js/default/no-internet.js"></script>
    <script src="assets/js/default/active.js"></script>
    <script src="assets/js/pwa.js"></script>
    <script>
      var url_string = window.location.href;
      var url = new URL(url_string);
      var id = url.searchParams.get("id");
      var data;
      
      axios({
            method: 'get',
            url: 'http://10.0.2.2:3000/donhang/'+id,
            
          }).then(function(response){
            console.log(response.data);
            data = response.data;
            $('#nguoi_gui').val(data.nguoi_gui);
            $('#sdt_nguoi_gui').val(data.sdt_nguoi_gui);
            $('#nguoi_nhan').val(data.nguoi_nhan);
            $('#sdt_nguoi_nhan').val(data.sdt_nguoi_nhan);
            $('#dia_chi').val(data.dia_chi);
            $('#gia_tri').val(data.hang_hoa[0].gia_tri);
            $('#mo_ta').val(data.hang_hoa[0].mo_ta);
            $('#trong_luong').val(data.hang_hoa[0].trong_luong),
            $('#so_luong').val(data.hang_hoa[0].so_luong)
            $('#ma_khuyen_mai').val(data.ma_khuyen_mai);
            $('#maDh').text(data.ma_don_hang);
          });
      $('#update').click(function(){
        axios({
            method: 'patch',
            url: 'http://10.0.2.2:3000/donhang/'+id,
            data: {
              nguoi_gui: $('#nguoi_gui').val(),
              sdt_nguoi_gui: $('#sdt_nguoi_gui').val(),
              nguoi_nhan: $('#nguoi_nhan').val(),
              sdt_nguoi_nhan: $('#sdt_nguoi_nhan').val(),
              dia_chi: $('#dia_chi').val(),
              hang_hoa:[{
                  "mo_ta": $('#mo_ta').val(),
                  "gia_tri": $('#gia_tri').val(),
                  "trong_luong": $('#trong_luong').val(),
                  "so_luong": $('#so_luong').val()
                }],
              ma_khuyen_mai: $('#ma_khuyen_mai').val()
            }
          }).then(function(response){
            alert('Cập nhật thông tin thành công!');
            window.location.href = "./donhang.html";
          });
      })
    </script>
  </body>
</html>